<?xml version="1.0" encoding="UTF-8"?>

<project>
    <target name="hello">
        <echo>Hello! ${google.webtoolkit.home}</echo>
    </target>
    
    <target name="gwt">
        <echo>GWT Home: ${google.webtoolkit.home}</echo>
        <echo>web.xml ${google.webtoolkit.webxml}</echo>
        <echo>${google.webtoolkit.webapp}</echo>
        <echo>${google.webtoolkit.classpath}</echo> 
       <java classname="com.totsp.mavenplugin.gwt.support.MakeCatalinaBase" fork="true"
      dir="./" >
            <arg value="${google.webtoolkit.tomcat}" />
            <arg value="${maven.war.webxml}" />
            <classpath>
                <pathelement location="${google.webtoolkit.source}" />
                <pathelement location="${maven.build.dest}" />
                <pathelement location="${maven.plugin.classpath}" />
                <!--path refid="maven.dependency.classpath" />
                <pathelement location="${plugin.getDependencyPath('com.totsp.gwt:maven-googlewebtoolkit-support')}"/>
                <pathelement location="${plugin.getDependencyPath('jdom:jdom')}"/>
                <pathelement location="${plugin.getDependencyPath('commons-cli:commons-cli')}"/-->
           </classpath>
      </java>
      <copy file="${google.webtoolkit.webapp}/META-INF/context.xml" 
         tofile="${google.webtoolkit.tomcat}/conf/gwt/localhost/ROOT.xml" 
         failonerror="false"/>
      <echo>compile src: ${google.webtoolkit.source}</echo>
      <java classname="com.google.gwt.dev.GWTShell" fork="true" dir="${basedir}">
          <sysproperty key="catalina.base" value="${google.webtoolkit.tomcat}" />
          <jvmarg line="${google.webtoolkit.extrajvmargs}" />
          <arg value="-out"/>
          <arg value="${google.webtoolkit.output}" />
          <arg value="-style" />
          <arg value="${google.webtoolkit.style}" />
          <arg value="-gen" />
          <arg value="${google.webtoolkit.gen}" />
          <arg value="-port" />
          <arg value="${google.webtoolkit.port}" />
          <arg value="-logLevel" />
          <arg value="${google.webtoolkit.logLevel}" />
          <arg value="${google.webtoolkit.runtarget}" />
          <classpath>
                    <pathelement path="${google.webtoolkit.source}" />
                    <pathelement path="${google.webtoolkit.home}/gwt-dev-windows.jar" />
                    <pathelement path="${google.webtoolkit.home}/gwt-dev-linux.jar" />
                    <pathelement path="${google.webtoolkit.home}/gwt-dev-mac.jar" />
                    <pathelement path="${maven.runtime.classpath}"/>
                    <pathelement location="${maven.build.dest}" />
          </classpath>
      </java>
    </target>
    
</project>
